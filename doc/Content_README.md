# Guide for Creating _Fittle_ Content

This document describes how to create the different content needed to deploy a health and fitness behavior change study program using the PARC Coach mobile application and system (referred to here as Fittle). This includes the following:
* the authoring roles assumed for different parts of the necessary content;
* the different content representations used and practices for content creation assumed;
* and how these content material are packaged for inclusion in Fittle.

For the purposes of this document, a Fittle study program, called here a _challenge_, is a sequence of activities within one or more domains of activty (e.g.,  health, fitness, nutritio)  that a person performs over some period of time. People participating in a study are assigned activities and receive messaging in formats defined below.

## Content Authoring Roles and Responsibilities

The following table describes the different authoring roles for Fittle content.

|Role |Responsibility  |
|----|:----|
|Domain Expert| Develops programs of activities in a domain and authors descriptions of those activities. May also develop messaging content to be used by Study Administrators and/or Coach Designers as interventions to be delivered to Participants in a timely manner (e.g., by a schedule, upon events happening such as particular answers by a Participant to questions asked in the Fittle app). |
|Study Administrator| Sets up a study and coordinates and oversees the people's participation in the study. This includes assigning people into the study, setting metadata about Participants (e.g., study condition) about Participants, and using manual Admin interfaces or the Fittle API (describe separately) to define or adjust Participant activities and messaging.|
|Coach Designer| Creates Artificial Intelligence algorithms for responding to Participant activities. These algorithms result in one or more of the following : assinging activities to a Participant; c|
|System Builder| Marshals content provided by Domain Experts and Study Administrations and makes these available to deployed Fittle studies.|
|Participant| Participates in behavior change studies as the intended audience for Fittle content.  NOTE: Participants primarily consume content generated by the other Roles, but do provide user-generated content for other Team members using the _Social Team Feed_ of the Fittle app. It is also assumed that Participants are selected by a Study Administrator as being appropriate for inclusion in a study.|

NOTE: These are _roles_ that may be fufilled by one or more people. Roles are not managed by the system other than the following:
* a person assuming the Study Administrator role may log in to a Fittle Admin Web Interface to perform administrative functions; and
* a person may only be a Participant and log in to the Fittle app if authorized to do so by a Study Administartor.

It is assumed in this document that when multiple roles are called out for developing content, that either one person with multiple expertise or a group of people who collaborate are addressing the content issue.


## Content Representations and Practices

The following table describes the different authoring roles for Fittle content.

|Content Type |Authoring Role(s) | Audience | Description |
|----|----|----|:----|
|Activity descriptions| Domain Expert| Participant | HTML files that provide information about a given activity (e.g., Walking, Eating vegetables). The HTML files may contain text, links to locally stored images, and links to web resources such as web pages and online videos.|
|Messaging|Domain Expert, Study Administrator, Coach Designer| Participant| Statically scheduled messaging shown to Participants at specific days in the study and times of day may be defined in JSON structures. Examples of this scheduled messaging is given below (see the examples 'initialAppQuestions.json', 'reportQuestions.json'. There is a special form of this messaging for a schedule of reminders (see reminders.json below).| 
|Participant Configuratation|Study Administrator| Study Administrator| JSON structures describing who is in the study and what person-specific meta-data is associated with them. A Study Administrator gathers this information by whatever means appropriate, organizes that in JSON file (described below) and either upload the files using the Fittle administrative web interface or the API (both described separately). There may be one or more such JSON files describing one or more Participants in this manner (see the 'participants.json' example below.  Note that a Participant may not log in to the Fittle app unless they have been listed first.| 
|Coaching Interventions|Domain Expert, Coach Designer| Participant| JSON structures associated with the invocation of the PARC Coach API (API described separately). Meta-data describing how to contact the Coach agent is described below (see the exaple 'agents.json').|
|Email Content|Domain Expert, Study Administrator| Participant|Participants may receive email outside of the Fittle App|

Note: There are content author roles for the Study Administrator and Participants in the form of user generated content using the Social Team Feed and Peer-to-Peer Post interfaces of the Fittle app. These to not require any attention as part of a study design and deployment and are not discussed further here.

## Packaging Content for Deployment

Some or all of the following materials arranged in this folder structure may be used to deliver Fittle content to System Builders and Study Administrators as described below. 

```
.
+-- activities/
|   +-- content/
|       +-- <studyname> 
|           +-- images
|           |   +-- *.png
|           +-- en
|           |   +-- activitySchedule*.json
|           |   +-- activity*.json
|           |   +-- *.html
|           +-- <ISO 639-1 language code>
|           |   +-- activitySchedule*.json
|           |   +-- activity*.json
|           |   +-- *.html
|           +...
|
+-- scheduledmessages/
|   +-- en
|   |   +-- initialAppQuestions*.json
|   |   +-- reportingingQuestions*.json
|   |   +-- participants*.json
|   |   +-- dailytips*.json
|   |
|   +-- <ISO 639-1 language code>
|   |   +-- ...
|   +...
|
+-- studyMetadata/
    +-- studyContactInformation.json

```
Notes:
* The wildcard character,'*', used above denotes any suffixing required for a specific study; e.g., study condition
specific content such as 'control' for 'control group participants'. Files not specified with the wildcard character
do should use the exact name given
* 
* Only English languge content are given in detail here. Corresponding folders for translated content should be included
in separate folders named with the appropriate ISO 639-1 language code.
*
* Under the 'content' subfolder, any additional folder structure may be used as long as the paths to items in this more
complex folder structure are consistently used throughout the other specification files described here;  e.g.,
/content/en/week1/activitySchedule.json, or /content/en/week2/walk.html.

These materials, described in more detail below, should to be formatted into a ZIP file and made available to a System Builder for inclusion in a Fittle deplooyment.


### Example JSON structures

This file defines the metadata to be associated with activities that may be assigned to specific participants (see participants.json below). The 'activity' attribute is
used in other structures (e.g., activitySchedule.json below and the Fittle API [described separately]) to identify which specific activity is to be used in an activity
assignment.

This file is specified by agreement between Domain Expert and  Study Administrator roles.

#### activities.json
```
[
  {
    "code": "269",
    "activity": "I2_Walk",
    "tag": "I2",
    "content": "content/I2/I2_Walk.html",
    "title": "Walk",
    "description" : "Walk today",
    "thumbnail": "content/I2/eatslowlythumb.png"
  },
  {
    "code": "270",
    "activity": "I2_Eat_Veggies",
    "tag": "I2",
    "content": "content/I2/I2_Eat_Veggies.html",
    "title": "Eat Veggies",
    "description" : "Eat vegetables today",
    "thumbnail": "content/I2/eatslowlythumb.png"
  },
  {
    "code": "271",
    "activity": "I2_Eat_Slower",
    "tag": "I2",
    "content": "content/I2/I2_Eat_Slower.html",
    "title": "Eat Slowly",
    "description" : "Eat slowly today",
    "thumbnail": "content/I2/eatslowlythumb.png"
  }
]
```

|Attribute |Description |
|----|:----|
|code, tag| These attributes are not used in the Fittle app and for bookkeeping of content authors.|
|content, thumbnail|These attrributes should be consistent with the organization of content in the 'activities' folder of the content deployment (e.g. taking forms like content/<study_name>/...).|
|title|This title appears as the main title on the Fittle app Daily Activity Page.|
|description|The description appears below the main title on the Fittle app Daily Activity Page.|


#### activityMasterSchedule.json

This file provides links to one or more actiivitySchedule*.json files described below. It is intended to be the master
file for describing static schedules of activities. The following attributes may be specified when linking together a
sequence of activity schedules:

|Attribute |Description |
|----|:----|
|contentRoot| The relative path to the activities to be applied within the content folder; e.g. '/content/en/activitySchedule.json' |
|startDayForThisContent| When a numeric value is given here, add this number of days to any scheduled date in the activitySchedule*.json fijle used. |
|startDateForThisContent| When a date string value is given here, use this absolute date to start scheduling activities in the activitySchedule*.json file used. |

Notes:
* If null is given for both startDayForThisContent and startDateForThisContent, assume activities are consecutively scheduled after any
previous activities specified in other activitySchedule files.


For example:

```
[
  {
    "contentRoot": "/content/path/to/an/activitySchedule.json",
    "startDayForThisContent": null,
    "startDateForThisContent": null
  },
  {
    "contentRoot": "/content/path/to/a/by/day/activitySchedule.json",
    "startDayForThisContent": 5,
    "startDateForThisContent": null
  },
  {
    "contentRoot": "/content/path/to/a/by/date/activitySchedule.json",
    "startDayForThisContent": null,
    "startDateForThisContent": "7/1/2017"
  },
]
```


#### activitySchedule.json

This file describes a static schedule of activities that may be assigned to specific participants (see participants.json below) upon first entry into the Fittle app.

This file is specified by agreement between Domain Expert and  Study Administrator roles.

```
{
  "title": "Static Schedule",
  "scheduling": "FromRegistered",
  "schedule": [
    {
      "activity": "Walk",
      "scheduledDay": 0
    },
    {
      "activity": "Walk",
      "scheduledDay": 1
    },
    {
      "activity": "Eat_Veggies",
      "scheduledDay": 2
    },
    {
      "activity": "Eat_Slower",
      "scheduledDay": 3
    },
    {
      "activity": "Walk",
      "scheduledDay": 4
    },
    {
      "activity": "Eat_Veggies",
      "scheduledDay": 5
    },
    {
      "activity": "Eat_Slower",
      "scheduledDay": 6
    },
    {
      "activity": "Walk",
      "scheduledDay": 7
    },
    {
      "activity": "Eat_Veggies",
      "scheduledDay": 8
    },
    {
      "activity": "Relax Today",
      "scheduledDay": 9
    }
  ]
}
```

#### dailytips.json

This file will generate a tip message for every day specified.

It is specified by agreement between Domain Expert and  Study Administrator roles.

```
[
    {

        "day": 1,
	"askTime": "09:00",
	"text": "Welcome to your first activity. You can keep track of how you are doing with this app."
    },
    {

        "day": 2,
	"askTime": "09:00",
	"text": "Make sure you save time to warm up and cool down before any physical activity."
    },
    {

        "day": 28,
	"askTime": "09:00",
	"text": "This is your last activty. We hope you have enjoyed this experience."
    }
 ]
```

#### initialAppQuestions.json

This example shows how to schedule a set of question to be asked immediately upon entry into the Fittle app. 

It is specified by agreement between Domain Expert and  Study Administrator roles.

```
{
  "sequences": [
    {
      "name": "goalTypeSelect",
      "constraints": [
        {
          "attribute": "preferences.goalType",
          "value": ""
        }
      ],
      "askDate": "-1",
      "askTime": "07:00",
      "expireDate": "28",
      "expireTime": "23:59",
      "sequenceBase": 10,
      "questions": [
        {
          "tag":"instruction",
          "text": "Hi there!! I will help you set a health goal to work on daily for the next 4 weeks. Please answer the next few questions carefully.",
          "responseFormat": "list-choose-one",
          "choices":{
            "ok": "OK"
          }
        },
        {
          "tag": "goalType",
          "text": "Which health goal below would you like to pursue?",
          "responseFormat": "list-choose-one",
          "choices": {
            "eatSlowly": "Eat slowly and mindfully",
            "walk": "Walk everyday",
            "eatVeggies": "Eat more vegetables"
          },
          "preferenceToSet": "goalType"
        }
      ]
    }
  ]
}
```


#### participants.json

This example determines who is allowed to participate in the study and sets study-specific information about each individual. 

It is specified by a Study Administrator.


```
[
 {
    "emailAddress": "example.treatment@parc.com",
    "condition": "treament",
    "settings": {
      "selfEfficacy": "high",
      "implementationIntention": "yes",
      "reminders": "yes",
      "reminderDistribution": "masked",
      "reminderCount": "7",
      "goalReported": "empty",
      "predefinedActivities": ""
    },
    "preferences" : {
      "goalType": "",
      "goalSpecific": "",
      "dailyGoalText": "",
      "difficulty":"",
      "goalContent": "",
      "choice": "",
      "place": "",
      "person": "",
      "eventTime": "",
      "reminderPeriod": "",
      "reminderText": ""
    }
 },
 {
    "emailAddress": "example.control@parc.com",
    "condition": "control",
    "settings": {
      "selfEfficacy": "high",
      "implementationIntention": "yes",
      "reminders": "yes",
      "reminderDistribution": "masked",
      "reminderCount": "7",
      "goalReported": "empty",
      "predefinedActivities": ""
    },
    "preferences" : {
      "goalType": "",
      "goalSpecific": "",
      "dailyGoalText": "",
      "difficulty":"",
      "goalContent": "",
      "choice": "",
      "place": "",
      "person": "",
      "eventTime": "",
      "reminderPeriod": "",
      "reminderText": ""
    }
 }
]
```

Note: Tailoring of the above settings and preferences is possible for each study. Consult a Study Builder for more details.

#### reminders.json

This file will generate a tip reminder message for every day specified.

It is specified by agreement between Domain Expert and  Study Administrator roles.

```
[
    {

        "day": 1,
	"askTime": "16:00",
	"text": "Don't forget to report on how your activity went today."
    },
    {

        "day": 19,
	"askTime": "10:00",
	"text": "Don't forget to ask someone today to join you in doing your activity tomorrow."
    }
 ]
```

#### reportingQuestions.json

This file determines what questions will be asked of a Participant after they report on whether they met a daily goal or not.

It is specified by agreement between Domain Expert and Study Administrator roles.

```
"sequences": [
    {
      "name": "activityDebrief",
      "constraints": [
        {
          "attribute": "settings.goalReported",
          "value": "1"
        }
      ],
      "askDate": "1",
      "askTime": "00:00",
      "expireDate": "1",
      "expireTime": "23:59",
      "sequenceBase": 200,
      "linkToActivity": true,
      "questions": [
        {
          "tag": "difficulty",
          "text": "How difficult was it to meet this goal?",
          "responseFormat": "list-choose-one",
          "choices": {
            "1": "Not at all difficult",
            "2": "Slightly difficult",
            "3": "Somewhat difficult",
            "4": "Moderately difficult",
            "5": "Extremely difficult"
          }
        },
        {
          "tag": "confidence",
          "text": "How confident are you that you can meet this goal for the next 3 days?",
          "responseFormat": "list-choose-one",
          "choices": {
            "1": "Not at all confident",
            "2": "Slightly confident",
            "3": "Somewhat confident",
            "4": "Moderately confident",
            "5": "Extremely confident"
          }
        }
      ]
    }
]
```

Note: the constraint "value" should be set to the same value as "askDate" to enable the triggering of this question after reporting on the given day of the study. Each day of the study may be specified differently or the same (by copying the above and adjusting the dates.

#### staticallyScheduledParticipants.json

This specification illustrates a special form of participant information (e.g., the same format and use as participants.json above) used to statically schedule a set of activities for an individual (e.g., a static progression of activities assigned to a participants in a study control condition).
```
[
 {
    "emailAddress": "static@parc.com",
    "condition": "I2-10",
    "settings": {
      "name": "Les",
      "studyId" : "",
      "age": "105",
      "location": "Here",
      "selfEfficacy": "high",
      "implementationIntention": "yes",
      "reminders": "yes",
      "reminderDistribution": "masked",
      "reminderCount": "7",
      "goalReported": "empty",
      "predefinedActivities": "activityScheduleDefault.json"
    },
    "preferences" : {
      "goalType": "predefined",
      "goalSpecific": "",
      "dailyGoalText": "",
      "difficulty":"",
      "goalContent": "",
      "choice": "",
      "place": "",
      "person": "",
      "eventTime": "",
      "reminderPeriod": "",
      "reminderText": ""
    }
  }
]
```

#### studyContactInformation.json

This file sets contact information that is shown to Participants when they may need to contact a Study Administrator (e.g., not being able to register with the Fittle App the first time).

It is specified by a Study Administrator.


```
{
    adminName: "Firstname Lastname",
    adminPhone: "+1-800-555-1212",
    adminEmail: "Firstname.Lastname@example.com"
}
```

## Coaching Interventions

A Domain Expert may influence the Coaching provided by the Fittle App by working with Coach designers to create a
_coaching use cases_. For example, suppose we were to assume that there is a coaching need for addressing the case of a
user who has not reported on a daily activity in 3 days.

Such an intervention involves a conversation that may be started using the following kinds of information:

* Name of intervention; e.g., 'Participant not reporting activities'
* Description of triggering event; e.g., No report for 3 days for a participant
* Description of intervention messaging; e.g., Ask the user if they are aware of not reporting, "You have not reported in 3 days. Have you remembered to do your activities?"
* Description of intervention activities; e.g., Reassign currently scheduled activities to the activities assigned 3 days ago.

Note: These are just example intervention possibilities to illustrate the kind of conversation to have with a Coach Designer.


## Customizing the Process for Specific Study Requirements

There are a various points in the above capabilities where a System Builder can work with the other Authoring Roles to adjust challenge delivery.
* Using the reminderDistribution and ReminderCount in participants.json to schedule different sequences of reminders based on study condition.
* Using the 'constraints' attribute of the messaging JSON structures (e.g., reportingQuestions.json) to control question asking based on previous answers



```
*************************************************************************
*
*  © [2018] PARC Inc., A Xerox Company
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Xerox Corporation.
* The intellectual and technical concepts contained
* herein are proprietary to PARC Inc. and Xerox Corp.,
* and may be covered by U.S. and Foreign Patents,
* patents in process, and may be protected by copyright law.
* This file is subject to the terms and conditions defined in
* file 'LICENSE.md', which is part of this source code package.
*
**************************************************************************/
```